---
import TagLayout from '@nz-layouts/Tag.astro';
import { getTagList, getTagMap } from '@nz-scripts/tags';

export async function getStaticPaths() {
	return getTagList().then((tagList) =>
		tagList.map(({ name }) => {
			return { params: { tag: name } };
		})
	);
}

const { tag } = Astro.params;

if (!tag) throw 'unreachable';

const posts = await getTagMap().then((tagMap) => tagMap[tag]);
---

<TagLayout frontmatter={{ tag, posts }} />

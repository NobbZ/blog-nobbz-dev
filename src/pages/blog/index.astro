---
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";

import NobbzDev from "../../layouts/NobbzDev.astro";

type BlogEntry = CollectionEntry<"blog">;

const blogEntries = await getCollection("blog");

const postPath = (post: BlogEntry) =>
  `/blog/${post.data.date.toISOString().substring(0, 10)}-${post.slug}`;
---

<NobbzDev title="Blog">
  <ul>
    {
      blogEntries.map((post: BlogEntry) => (
        <div>
          <h2>
            <a href={postPath(post)}>{post.data.title}</a>
          </h2>
        </div>
      ))
    }
  </ul>
</NobbzDev>
